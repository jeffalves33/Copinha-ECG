<!-- views/tickets/select-tickets.ejs -->
<!DOCTYPE html>
<html>

<%- include('../partials/head', { title: 'IngressosNaJu' }) %>

<body class="d-flex justify-content-center align-items-center vh-100 bg-dark">
    <div class="card p-4 shadow-lg" style="max-width: 400px; width: 90%;">
        <div class="card-body text-center">
            <h5 class="card-title mb-4" style="color: #89ea55;">Selecione a Quantidade de Ingressos</h5>
            
            <div class="form-group mb-4">
                <label for="qtdIngressos" class="form-label visually-hidden">Quantidade de ingressos</label>
                <input type="number" id="qtdIngressos" class="form-control form-control-lg text-center" min="1" max="10" placeholder="Ex: 1"/>
            </div>
            
            <button type="button" class="btn btn-success btn-lg w-100" onclick="saveQtdTickets()">Confirmar</button>
        </div>
    </div>
</body>

</html>

<script>
    function saveQtdTickets() {
        const inputTickets = document.getElementById("qtdIngressos").value;
        if (inputTickets > 0 && inputTickets <= 10) { // Added max validation
            localStorage.setItem("qtdIngressos", parseInt(inputTickets));
            const userId = localStorage.getItem("userId");
            window.location.href = `/tickets/summary?qtd=${inputTickets}&userId=${userId}`;
        } else {
            alert("Por favor, insira uma quantidade vÃ¡lida entre 1 e 10."); // User feedback
            document.getElementById("qtdIngressos").value = ""; // Clear invalid input
        }
    }
</script>